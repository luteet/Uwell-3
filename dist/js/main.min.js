const body=document.querySelector("body"),html=document.querySelector("html"),menu=document.querySelectorAll(".header__burger, .header__nav, body"),burger=document.querySelector(".header__burger"),header=document.querySelector(".header"),imageBody=document.querySelectorAll(".image-body, figure");imageBody.forEach(e=>{const t=e.querySelector("img"),o=getComputedStyle(e);t&&t.getAttribute("width")&&t.getAttribute("height")&&"relative"==o.position&&(e.style.paddingTop=Number(t.getAttribute("height"))/Number(t.getAttribute("width"))*100+"%")}),body.addEventListener("click",(function(e){function t(t){return e.target.closest(t)}t(".header__burger")&&menu.forEach(e=>{e.classList.toggle("_mob-menu-active")});let o=t(".scroll-link");if(o&&("/"===window.location.pathname||"#"===window.location.pathname[1])){let t;e.preventDefault(),t=document.querySelector(o.getAttribute("href").slice(1)),menu.forEach(e=>{e.classList.remove("_mob-menu-active")}),t?t.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}):body.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}const r=t(".faq__question");if(r){const e=r.parentElement,t=document.querySelector(".faq__item._active");t?t==e?t.classList.remove("_active"):(t.classList.remove("_active"),e.classList.add("_active")):e.classList.add("_active")}}));let coordsY,windowSize=0;function resize(){html.style.setProperty("--height-header",header.offsetHeight+"px"),windowSize!=window.innerWidth&&html.style.setProperty("--svh",.01*window.innerHeight+"px"),html.style.setProperty("--vh",.01*window.innerHeight+"px"),windowSize=window.innerWidth}if(resize(),window.addEventListener("resize",resize),document.querySelector(".partners__slider")){new Splide(".partners__slider",{type:"loop",autoWidth:!0,gap:20,pagination:!1,breakpoints:{992:{gap:10}}}).mount()}function scroll(){coordsY=Math.abs(body.getBoundingClientRect().y),coordsY>0&&!header.classList.contains("_scroll")?header.classList.add("_scroll"):coordsY<=0&&header.classList.contains("_scroll")&&header.classList.remove("_scroll")}scroll(),document.addEventListener("scroll",scroll);const doctorCardVideoWrapper=document.querySelectorAll(".doctor-card__video--wrapper");function Popup(e){let t=document.querySelector("body"),o=document.querySelector("html"),r="object"==typeof e&&!!e.saveHref,i=!0,n=!0;const s=function(e,n){if(i){i=!1;let s=document.querySelector(e);if(!s)return new Error(`Not found "${e}"`);t.classList.remove("_popup-active"),o.style.setProperty("--popup-padding",window.innerWidth-t.offsetWidth+"px"),t.classList.add("_popup-active"),r&&history.pushState("","",e),setTimeout(()=>{if(n)s.classList.add("_transition-none"),s.classList.add("_active"),i=!0;else{s.classList.add("_active"),s.addEventListener("transitionend",(function e(){i=!0,s.removeEventListener("transitionend",e)}))}},0)}},c=function(e){if(n){let i;n=!1,i="string"==typeof e?document.querySelector(e):e.closest(".popup"),i.classList.contains("_transition-none")&&i.classList.remove("_transition-none"),setTimeout(()=>{i.classList.remove("_active"),i.addEventListener("transitionend",(function e(){const s=document.querySelectorAll(".popup._active");if(s.length<1&&(t.classList.remove("_popup-active"),o.style.setProperty("--popup-padding","0px")),r&&(!function(){let e=window.location.toString();if(e.indexOf("#")>0){let t=e.substring(0,e.indexOf("#"));window.history.replaceState({},document.title,t)}}(),s[s.length-1]&&history.pushState("","","#"+s[s.length-1].getAttribute("id"))),n=!0,document.querySelector("._sended")&&document.querySelector("._sended").classList.remove("_sended"),document.querySelector("._sending")&&document.querySelector("._sending").classList.remove("_sending"),document.querySelector(".feedback-popup__error._active")){const e=document.querySelector(".feedback-popup__error._active");e.classList.remove("_active"),e.setAttribute("aria-hidden","true")}i.querySelectorAll("input").forEach(e=>{e.value=""}),i.removeEventListener("transitionend",e)}))},0)}};return{open:function(e){s(e)},close:function(e){c(e)},init:function(){let e;t.addEventListener("click",(function(t){e=t.target;let o=e.closest(".open-popup");o&&(t.preventDefault(),s(o.getAttribute("href")),o.dataset.theme?document.querySelector(o.getAttribute("href")).setAttribute("data-theme",o.dataset.theme):document.querySelector(o.getAttribute("href")).removeAttribute("data-theme"));let r=e.closest(".popup-close");if(r){c(r);e.closest(".popup").dataset.timer&&localStorage.setItem("uwell-2-application-popup",!0)}}));if(document.querySelectorAll(".popup").forEach(e=>{let t=e.dataset.timer;t&&"true"!=localStorage.getItem("uwell-2-application-popup")&&(Number(t)&&(t=1e3*Number(t)),setTimeout(()=>{s("#"+e.getAttribute("id"))},t))}),r){let e=new URL(window.location);e.hash&&s(e.hash,!0)}}}}doctorCardVideoWrapper.forEach(e=>{const t=e.querySelector("video");t&&t.getAttribute("width")&&t.getAttribute("height")&&e.style.setProperty("--aspect-ratio",Number(t.getAttribute("height"))/Number(t.getAttribute("width"))*100+"%")});const popup=new Popup;popup.init();const feedbackPopupBody=document.querySelector(".feedback-popup__body");feedbackPopupBody.addEventListener("submit",(function(e){e.preventDefault();const t=document.querySelector(".feedback-popup__body"),o=t.querySelector(".feedback-popup__error");t.classList.add("_sending");const r=t.querySelector(".feedback-popup__body--wrapper");let i=t.closest(".popup").dataset.theme?"theme="+t.closest(".popup").dataset.theme:"theme=заявка-з-сайту";r.querySelectorAll("input").forEach((e,t)=>{e.value&&(i+=`&${e.name}=${e.value}`)}),fetch("https://api.uwell.care/api/mail/send",{method:"POST",body:i,mode:"no-cors",headers:{"content-type":"application/x-www-form-urlencoded"}}).then(e=>200!==e.status?Promise.reject():e.text()).then(e=>{setTimeout(()=>{t.classList.remove("_sending"),t.classList.add("_sended")},500)}).catch(()=>{t.classList.remove("_sending"),o.classList.add("_active"),o.removeAttribute("aria-hidden")})}));